(this["webpackJsonpeurovision-scorer"]=this["webpackJsonpeurovision-scorer"]||[]).push([[0],{117:function(e,a,n){"use strict";n.r(a);var t=n(0),i=n.n(t),r=n(24),s=n.n(r),o=(n(72),n(73),n(56)),c=n(36),l=n.n(c),d=n(11),u=n(57),b=n(58),m=n(59),j=n(26),g=n(67),h=n(65),S=n(5),O=n(8),p=n(29),v=["Austria","Portugal","Switzerland","Poland","Serbia","France","Cyprus","Spain","Sweden","Albania","Italy","Estonia","Finland","Czechia","Australia","Belgium","Armenia","Moldova","Ukraine","Norway","Germany","Lithuania","Israel","Slovenia","Croatia","United Kingdom"],y={Afghanistan:"AF",Albania:"AL",Algeria:"DZ","American Samoa":"AS",Andorra:"AD",Angola:"AO",Anguilla:"AI",Antarctica:"AQ","Antigua and Barbuda":"AG",Argentina:"AR",Armenia:"AM",Aruba:"AW",Australia:"AU",Austria:"AT",Azerbaijan:"AZ",Bahamas:"BS",Bahrain:"BH",Bangladesh:"BD",Barbados:"BB",Belarus:"BY",Belgium:"BE",Belize:"BZ",Benin:"BJ",Bermuda:"BM",Bhutan:"BT",Bolivia:"BO",Bonaire:"BQ","Bosnia and Herzegovina":"BA",Botswana:"BW","Bouvet Island":"BV",Brazil:"BR","British Indian Ocean Territory":"IO","Brunei Darussalam":"BN",Bulgaria:"BG","Burkina Faso":"BF",Burundi:"BI",Cambodia:"KH",Cameroon:"CM",Canada:"CA","Cape Verde":"CV","Cayman Islands":"KY","Central African Republic":"CF",Chad:"TD",Chile:"CL",China:"CN","Christmas Island":"CX","Cocos (Keeling) Islands":"CC",Colombia:"CO",Comoros:"KM",Congo:"CG","Democratic Republic of the Congo":"CD","Cook Islands":"CK","Costa Rica":"CR",Croatia:"HR",Cuba:"CU",Curacao:"CW",Cyprus:"CY",Czechia:"CZ","Cote d'Ivoire":"CI",Denmark:"DK",Djibouti:"DJ",Dominica:"DM","Dominican Republic":"DO",Ecuador:"EC",Egypt:"EG","El Salvador":"SV","Equatorial Guinea":"GQ",Eritrea:"ER",Estonia:"EE",Ethiopia:"ET","Falkland Islands (Malvinas)":"FK","Faroe Islands":"FO",Fiji:"FJ",Finland:"FI",France:"FR","French Guiana":"GF","French Polynesia":"PF","French Southern Territories":"TF",Gabon:"GA",Gambia:"GM",Georgia:"GE",Germany:"DE",Ghana:"GH",Gibraltar:"GI",Greece:"GR",Greenland:"GL",Grenada:"GD",Guadeloupe:"GP",Guam:"GU",Guatemala:"GT",Guernsey:"GG",Guinea:"GN","Guinea-Bissau":"GW",Guyana:"GY",Haiti:"HT","Heard Island and McDonald Islands":"HM","Holy See (Vatican City State)":"VA",Honduras:"HN","Hong Kong":"HK",Hungary:"HU",Iceland:"IS",India:"IN",Indonesia:"ID","Iran, Islamic Republic of":"IR",Iraq:"IQ",Ireland:"IE","Isle of Man":"IM",Israel:"IL",Italy:"IT","Jamaica\tJM\tJAM":"JM",Japan:"JP",Jersey:"JE",Jordan:"JO",Kazakhstan:"KZ",Kenya:"KE",Kiribati:"KI","Korea, Democratic People's Republic of  ":"KP","Korea, Republic of":"KR",Kuwait:"KW",Kyrgyzstan:"KG",Laos:"LA",Latvia:"LV",Lebanon:"LB",Lesotho:"LS",Liberia:"LR",Libya:"LY",Liechtenstein:"LI",Lithuania:"LT",Luxembourg:"LU",Macao:"MO","North Macedonia":"MK",Madagascar:"MG",Malawi:"MW",Malaysia:"MY",Maldives:"MV",Mali:"ML",Malta:"MT","Marshall Islands":"MH",Martinique:"MQ",Mauritania:"MR",Mauritius:"MU",Mayotte:"YT",Mexico:"MX","Micronesia, Federated States of":"FM",Moldova:"MD",Monaco:"MC",Mongolia:"MN",Montenegro:"ME",Montserrat:"MS",Morocco:"MA",Mozambique:"MZ",Myanmar:"MM",Namibia:"NA",Nauru:"NR",Nepal:"NP",Netherlands:"NL","New Caledonia":"NC","New Zealand":"NZ",Nicaragua:"NI",Niger:"NE",Nigeria:"NG",Niue:"NU","Norfolk Island":"NF","Northern Mariana Islands":"MP",Norway:"NO",Oman:"OM",Pakistan:"PK",Palau:"PW",Palestine:"PS",Panama:"PA","Papua New Guinea":"PG",Paraguay:"PY",Peru:"PE",Philippines:"PH",Pitcairn:"PN",Poland:"PL",Portugal:"PT","Puerto Rico":"PR",Qatar:"QA",Romania:"RO",Russia:"RU",Rwanda:"RW",Reunion:"RE","Saint Barthelemy":"BL","Saint Helena":"SH","Saint Kitts and Nevis":"KN","Saint Lucia":"LC","Saint Martin (French part)":"MF","Saint Pierre and Miquelon":"PM","Saint Vincent and the Grenadines":"VC",Samoa:"WS","San Marino":"SM","Sao Tome and Principe":"ST","Saudi Arabia":"SA",Senegal:"SN",Serbia:"RS",Seychelles:"SC","Sierra Leone":"SL",Singapore:"SG","Sint Maarten (Dutch part)":"SX",Slovakia:"SK",Slovenia:"SI","Solomon Islands":"SB",Somalia:"SO","South Africa":"ZA","South Georgia and the South Sandwich Islands":"GS","South Sudan":"SS",Spain:"ES","Sri Lanka":"LK",Sudan:"SD",Suriname:"SR","Svalbard and Jan Mayen":"SJ",Swaziland:"SZ",Sweden:"SE",Switzerland:"CH","Syrian Arab Republic":"SY",Taiwan:"TW",Tajikistan:"TJ","United Republic of Tanzania":"TZ",Thailand:"TH","Timor-Leste":"TL",Togo:"TG",Tokelau:"TK",Tonga:"TO","Trinidad and Tobago":"TT",Tunisia:"TN",Turkey:"TR",Turkmenistan:"TM","Turks and Caicos Islands":"TC",Tuvalu:"TV",Uganda:"UG",Ukraine:"UA","United Arab Emirates":"AE","United Kingdom":"GB","United States":"US","United States Minor Outlying Islands":"UM",Uruguay:"UY",Uzbekistan:"UZ",Vanuatu:"VU",Venezuela:"VE","Viet Nam":"VN","British Virgin Islands":"VG","US Virgin Islands":"VI","Wallis and Futuna":"WF","Western Sahara":"EH",Yemen:"YE",Zambia:"ZM",Zimbabwe:"ZW"},f=n(37);n(75);f.initializeApp({apiKey:"AIzaSyAyiPwsV5KhuJBve4i9Ci4qcXyB9fc5XQs",authDomain:"esc-voter.firebaseapp.com",databaseURL:"https://esc-voter-default-rtdb.firebaseio.com/",projectId:"esc-voter",storageBucket:"esc-voter.appspot.com",messagingSenderId:"124189722667",appId:"1:124189722667:web:86ccdcbd1414565558826e"});var M=f.firestore(),N=n(2),C=[12,10,8,7,6,5,4,3,2,1];var I=function(e){Object(g.a)(n,e);var a=Object(h.a)(n);function n(e){var t;Object(b.a)(this,n),t=a.call(this,e);var i={items:v.map((function(e,a){return{id:"item-".concat(a),countryName:e}})),userName:"",postSucceeded:!1},r=localStorage.getItem("lastState"),s=r?JSON.parse(r):i,c=i.items.length===s.items.length,l=function(e,a){var n,t=new Set,i=Object(o.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.has(r)&&t.add(r)}}catch(s){i.e(s)}finally{i.f()}return t}(new Set(i.items.map((function(e){return e.countryName}))),new Set(s.items.map((function(e){return e.countryName})))).size===i.items.length,d=c&&l;return console.log("areSameLength",c),console.log("containSameCountries",l),t.state=d?s:i,t.onDragEnd=t.onDragEnd.bind(Object(j.a)(t)),t}return Object(m.a)(n,[{key:"onDragEnd",value:function(e){if(e.destination){var a=function(e,a,n){var t=Array.from(e),i=t.splice(a,1),r=Object(O.a)(i,1)[0];return t.splice(n,0,r),t}(this.state.items,e.source.index,e.destination.index);this.setState({items:a});localStorage.setItem("lastState",JSON.stringify(Object(S.a)(Object(S.a)({},this.state),{},{items:a})))}}},{key:"render",value:function(){var e=this,a=this.state,n=a.userName,t=a.items;return Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{style:{margin:"1rem"},children:"ESC hos Velle 2023"}),Object(N.jsxs)("div",{style:{textAlign:"left",margin:"1rem"},children:[Object(N.jsx)("p",{children:"Dra og slipp landene i rekkef\xf8lge. Du trenger ikke sortere de som ikke f\xe5r poeng."}),Object(N.jsx)("p",{children:"Sveip til bunnen for \xe5 skrive inn kallenavn og sende inn poeng."})]}),Object(N.jsx)(p.a,{onDragEnd:this.onDragEnd,children:Object(N.jsx)(p.c,{droppableId:"droppable",children:function(e,a){return Object(N.jsxs)("div",Object(S.a)(Object(S.a)({},e.droppableProps),{},{ref:e.innerRef,style:(n=a.isDraggingOver,{background:n?"lightblue":"lightgrey",padding:8,width:250,margin:"0 auto"}),children:[t.map((function(e,a){return Object(N.jsx)(p.b,{draggableId:e.id,index:a,children:function(n,t){return Object(N.jsx)("div",{style:{marginBottom:"".concat(16,"px")},children:Object(N.jsxs)("div",Object(S.a)(Object(S.a)(Object(S.a)({className:"nes-container is-rounded",ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{style:(i=t.isDragging,r=n.draggableProps.style,Object(S.a)({userSelect:"none",padding:8,background:i?"lightgreen":"lightblue"},r)),children:[Object(N.jsxs)("div",{children:[Object(N.jsx)("img",{src:"flags/".concat(y[e.countryName].toLowerCase(),".png"),className:"flag",alt:"Flag of ".concat(e.countryName)}),e.countryName]}),C[a]&&Object(N.jsx)("div",{className:"nes-container is-rounded",style:{padding:"0.1rem",background:"#fff"},children:C[a]})]}))});var i,r}},e.id)})),e.placeholder]}));var n}})}),Object(N.jsx)("div",{style:{margin:"1rem"},children:this.state.postSucceeded?Object(N.jsx)("div",{children:"Takk for dine svar!"}):Object(N.jsxs)(i.a.Fragment,{children:[Object(N.jsxs)("div",{className:"nes-field",style:{margin:"1rem"},children:[Object(N.jsx)("label",{children:"Navnet ditt"}),Object(N.jsx)("input",{value:this.state.userName,onChange:function(a){return e.setState({userName:a.target.value})},className:"nes-input",type:"text"})]}),Object(N.jsx)("button",{className:"nes-btn is-primary ".concat(!n&&"is-disabled"),style:{marginBottom:"8rem"},onClick:Object(u.a)(l.a.mark((function a(){var i;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=C.reduce((function(e,a,n){return Object(S.a)(Object(S.a)({},e),{},Object(d.a)({},a,t[n].countryName))}),{}),M.collection("user-votes").add({userName:n,votes:i}).then((function(a){console.log("Document written with ID: ",a.id),e.setState({postSucceeded:!0})})).catch((function(e){console.error("Error adding document: ",e)}));case 2:case"end":return a.stop()}}),a)}))),children:"Send inn poeng"})]})})]})}}]),n}(t.Component),A=n(66),B=function(){var e=Object(t.useState)([]),a=Object(O.a)(e,2),n=a[0],i=a[1],r=Object(t.useState)(0),s=Object(O.a)(r,2),o=s[0],c=s[1];Object(t.useEffect)((function(){M.collection("user-votes").get().then((function(e){var a=[];e.forEach((function(e){return a.push({userName:e.data().userName,votes:e.data().votes})})),i(a)}))}),[]);var l=n.reduce((function(e,a){try{return Object.entries(a.votes).map((function(e){var a=Object(O.a)(e,2),n=a[0];return[a[1],parseInt(n)]})).sort((function(e,a){return Object(O.a)(e,2)[1]-Object(O.a)(a,2)[1]})).reduce((function(e,n){var t=Object(O.a)(n,2),i=t[0],r=t[1];return e.myVoteStep>=o?e:Object(S.a)(Object(S.a)({},e),{},{voteTally:Object(S.a)(Object(S.a)({},e.voteTally),{},Object(d.a)({},i,(e.voteTally[i]||0)+r)),usersVotes:a.userName===e.votingUserName?Object(S.a)(Object(S.a)({},e.usersVotes),{},Object(d.a)({},i,r)):Object(d.a)({},i,r),myVoteStep:e.myVoteStep+1,votingUserName:a.userName})}),e)}catch(n){return e}}),{voteTally:v.reduce((function(e,a){return Object(S.a)(Object(S.a)({},e),{},Object(d.a)({},a,0))}),{}),usersVotes:{},votingUserName:"",myVoteStep:0});return console.log(l),console.log(n),Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Resultater"}),Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{className:"nes-btn is-secondary",onClick:function(){return c(o-1)},children:"Tilbake"}),Object(N.jsx)("button",{className:"nes-btn is-primary",onClick:function(){return c(o+1)},children:"Neste"})]}),Object(N.jsxs)("div",{children:["Stemmene fra ",l.votingUserName]}),Object(N.jsx)("div",{children:Object(N.jsx)("div",{style:{width:"400px",margin:"0 auto"},children:Object(N.jsx)("table",{className:"nes-table is-bordered is-centered",style:{background:"lightblue"},children:Object(N.jsx)("tbody",{children:Object.entries(l.voteTally).sort((function(e,a){var n=Object(O.a)(e,2)[1];return Object(O.a)(a,2)[1]-n})).map((function(e){var a=Object(O.a)(e,2),n=a[0],t=a[1],i=l.usersVotes[n]===Math.max.apply(Math,Object(A.a)(Object.values(l.usersVotes))),r="flags/".concat(y[n].toLowerCase(),".png");return Object(N.jsxs)("tr",{style:i?{backgroundColor:"rgb(32, 156, 238)"}:{},children:[Object(N.jsxs)("td",{children:[Object(N.jsx)("img",{src:r,className:"flag",alt:"Flag of ".concat(n)}),n]}),Object(N.jsx)("td",{style:{width:"4rem"},children:l.usersVotes[n]||""}),Object(N.jsx)("td",{style:{width:"4rem"},children:t})]},"".concat(n," ").concat(t))}))})})})})]})},G=n(64),x=n(4),T=function(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)(G.a,{basename:"/eurovision-scorer",children:[Object(N.jsx)(x.a,{path:"/",exact:!0,component:I}),Object(N.jsx)(x.a,{path:"/score",component:B})]})})};s.a.render(Object(N.jsx)(T,{}),document.getElementById("root"))},72:function(e,a,n){},73:function(e,a,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.3ad21f4f.chunk.js.map